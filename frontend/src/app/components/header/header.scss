// === SCOPED TO APP-HEADER ===
app-header {
  display: block;
  width: 100%;
}
// === MAIN TOOLBAR ===
.main-toolbar {
  display: flex;
  justify-content: center;
  padding: 0 16px;
  background: var(--color-bg-card);
  color: var(--color-text-primary);
  border-bottom: 1px solid var(--color-border);
  height: 56px;
  box-shadow: var(--shadow-sm);
  position: sticky;
  top: 0;
  z-index: 1000;
  transition: background 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

// === TOOLBAR CONTENT WRAPPER ===
.toolbar-content-wrapper {
  display: flex;
  align-items: center;
  width: 100%;
  max-width: 1600px;
  gap: 16px;
}

.toolbar-section {
  display: flex;
  align-items: center;
  gap: 12px;
}

.toolbar-spacer {
  flex-grow: 1;
}

// === BRAND LOGO ===
.brand-logo {
  font-weight: 700 !important;
  font-size: 1.375rem !important;
  text-decoration: none;
  color: var(--color-text-primary) !important;
  padding: 8px 16px !important;
  border-radius: 8px !important;
  transition: all 0.2s ease !important;
  letter-spacing: -0.5px;

  &:hover {
    background: var(--color-bg-hover) !important;
  }

  .logo-text {
    color: inherit;
    font-weight: 700;
  }
}

// === CREATE POST BUTTON ===
.create-post-btn {
  font-weight: 600 !important;
  padding: 8px 16px !important;
  border-radius: 8px !important;
  border: 1px solid var(--color-primary) !important;
  color: var(--color-primary) !important;
  transition: all 0.2s ease !important;

  &:hover {
    background: var(--color-primary) !important;
    color: white !important;
  }
}

body.dark-mode .create-post-btn {
  border-color: var(--color-primary-light) !important;
  color: var(--color-primary-light) !important;

  &:hover {
    background: var(--color-primary-light) !important;
    color: var(--color-text-inverse) !important;
  }
}

// === ICON BUTTONS ===
app-header .icon-btn {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 40px !important;
  height: 40px !important;
  border-radius: 8px !important;
  color: var(--color-text-primary) !important;
  transition: background 0.2s ease !important;
  padding: 0 !important;

  mat-icon {
    color: var(--color-text-primary) !important;
  }

  &:hover {
    background: var(--color-bg-hover) !important;
    transform: none !important; 
  }

  &.notification-btn {
    ::ng-deep .mat-badge-content {
      background: var(--color-error) !important;
      color: white !important;
      font-weight: 600;
      font-size: 10px;
    }
  }
}

// === TEXT BUTTON ===
.text-btn {
  font-weight: 600 !important;
  padding: 8px 16px !important;
  border-radius: 8px !important;
  color: var(--color-text-primary) !important;
  transition: all 0.2s ease !important;

  &:hover {
    background: var(--color-bg-hover) !important;
  }
}

// === PROFILE BUTTON ===
.profile-btn {
  padding: 4px !important;
  min-width: auto !important;
  border-radius: 50% !important;
  transition: all 0.2s ease !important;

  &:hover {
    background: var(--color-bg-hover) !important;
  }
}

.header-avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
  display: block;
}

// === SIGNUP BUTTON ===
.signup-btn {
  font-weight: 600 !important;
  padding: 8px 16px !important;
  border-radius: 8px !important;
  background: #3b49df !important;
  color: white !important;
  transition: all 0.2s ease !important;

  &:hover {
    background: #2d3db8 !important;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(59, 73, 223, 0.3);
  }
}

:host-context(.dark-mode) .signup-btn {
  background: #5865f2 !important;

  &:hover {
    background: #4752c4 !important;
  }
}

// === PROFILE DROPDOWN ===
::ng-deep {
  .profile-dropdown {
    margin-top: 8px;
    border-radius: 8px !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15) !important;
    min-width: 250px !important;

    .mat-mdc-menu-content {
      padding: 8px !important;
    }

    .mat-mdc-menu-panel {
      background: #ffffff;
    }

    // Force menu item colors in light mode
    .mat-mdc-menu-item {
      color: #090909 !important;

      .mdc-list-item__primary-text {
        color: #090909 !important;
      }
    }
  }

  // DARK MODE FIX
  .dark-mode .profile-dropdown,
  body.dark-mode .profile-dropdown {
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5) !important;

    .mat-mdc-menu-panel {
      background: #1a1a1a !important;
    }

    // Force white text in dark mode
    .mat-mdc-menu-item {
      color: #f5f5f5 !important;

      .mdc-list-item__primary-text {
        color: #f5f5f5 !important;
      }

      // Menu item content
      .mat-mdc-menu-item-text {
        color: #f5f5f5 !important;
      }

      // Icons
      .mat-icon {
        color: #9ca3af !important;
      }

      // Hover state
      &:hover {
        background: rgba(255, 255, 255, 0.08) !important;

        .mat-icon {
          color: #5865f2 !important;
        }
      }
    }

    // Fix divider
    .mat-divider {
      border-top-color: rgba(255, 255, 255, 0.12) !important;
    }
  }
}

.profile-menu-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px;
  background: #f3f4f6;
  border-radius: 6px;
  margin-bottom: 8px;
}

:host-context(.dark-mode) .profile-menu-header {
  background: #2d2d2d;
}

.profile-menu-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
}

.profile-info {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.profile-username {
  font-size: 0.95rem;
  font-weight: 700;
  color: #090909;
}

:host-context(.dark-mode) .profile-username {
  color: #f5f5f5 !important;
}

.menu-item {
  border-radius: 6px !important;
  padding: 10px 16px !important;
  margin: 2px 0 !important;
  transition: all 0.2s ease !important;
  display: flex !important;
  align-items: center !important;

  mat-icon {
    color: #6b7280 !important;
    margin-right: 12px !important;
    font-size: 20px;
    width: 20px;
    height: 20px;
  }

  span {
    color: #090909 !important;
    font-weight: 500;
  }

  &:hover {
    background: #f3f4f6 !important;

    mat-icon {
      color: #3b49df !important;
    }
  }
}

:host-context(.dark-mode) .menu-item {
  mat-icon {
    color: #9ca3af !important;
  }

  span {
    color: #f5f5f5 !important;
  }

  &:hover {
    background: #2d2d2d !important;

    mat-icon {
      color: #5865f2 !important;
    }

    span {
      color: #ffffff !important;
    }
  }
}

// === RESPONSIVE DESIGN ===
@media (max-width: 768px) {
  .main-toolbar {
    padding: 0 12px;
  }

  .toolbar-content-wrapper {
    gap: 8px;
  }

  .brand-logo {
    font-size: 1.25rem !important;
    padding: 6px 12px !important;
  }

  .toolbar-section.right {
    gap: 8px;
  }

  .create-post-btn {
    padding: 6px 12px !important;
    font-size: 0.875rem !important;
  }

  .text-btn {
    display: none !important;
  }

  .signup-btn {
    padding: 6px 12px !important;
    font-size: 0.875rem !important;
  }
}

@media (max-width: 480px) {
  .create-post-btn {
    display: none !important;
  }
}

// === ACCESSIBILITY ===
@media (prefers-reduced-motion: reduce) {
  * {
    animation: none !important;
    transition: none !important;
  }
}


/* Force light and dark explicitly for header */
body:not(.dark-mode) app-header .main-toolbar {
  background: #ffffff !important;
  color: #090909 !important;
  border-bottom-color: #e5e7eb !important;
}

body.dark-mode app-header .main-toolbar {
  background: #1a1a1a !important;
  color: #f5f5f5 !important;
  border-bottom-color: #2d2d2d !important;
}
