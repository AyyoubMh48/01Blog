<div class="form-container">
  <mat-card class="post-editor-card">
    <mat-card-content *ngIf="!isEditMode || (isEditMode && post)">
      <form #postForm="ngForm" (ngSubmit)="onSubmit(postForm)">
        <input
          type="file"
          id="editor-media-input"
          (change)="handleEditorMediaUpload($event)"
          accept="image/*,video/*"
          hidden
        />
        <mat-form-field appearance="outline" class="title-field">
          <mat-label>New post title here...</mat-label>
          <input matInput name="title" [ngModel]="post?.title" required />
        </mat-form-field>

        <mat-form-field appearance="outline" class="tags-field">
          <mat-label>Add up to 4 tags (comma-separated)</mat-label>
          <input matInput name="tags" [(ngModel)]="tagsString" />
        </mat-form-field>

        <div class="quill-editor-container">
          <quill-editor
            [(ngModel)]="editorContent"
            name="editorContent"
            [modules]="quillModules"
            (onEditorCreated)="editorCreated($event)"
            placeholder="Write your post content here..."
            [required]="true"
          >
          </quill-editor>
        </div>

        <div class="form-actions">
          <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="
              postForm.invalid || !editorContent.trim() || isSubmitting
            "
          >
            <span *ngIf="isSubmitting">Saving...</span>
            <span *ngIf="!isSubmitting">{{
              isEditMode ? "Save Changes" : "Publish"
            }}</span>
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
