<div class="register-wrapper">
  <!-- Left Side - Branding (Desktop Only) -->
  <div class="register-branding">
    <div class="branding-content">
      <div class="branding-logo">
        <mat-icon>edit</mat-icon>
      </div>
      <h1 class="branding-title">Join 01Blog</h1>
      <p class="branding-subtitle">Start sharing your amazing stories</p>
      
      <div class="branding-benefits">
        <div class="benefit">
          <mat-icon>check_circle</mat-icon>
          <span>Create & Publish Posts</span>
        </div>
        <div class="benefit">
          <mat-icon>check_circle</mat-icon>
          <span>Connect with Readers</span>
        </div>
        <div class="benefit">
          <mat-icon>check_circle</mat-icon>
          <span>Build Your Community</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Right Side - Register Form -->
  <div class="register-container">
    <mat-card class="register-card">
      <!-- Header -->
      <div class="register-header">
        <h1 class="register-title">Create Account</h1>
        <p class="register-subtitle">Join the 01Blog community</p>
      </div>

      <!-- Form -->
      <mat-card-content>
        <form #registerForm="ngForm" (ngSubmit)="onSubmit(registerForm)" class="register-form">
          
          <!-- Username Field -->
          <div class="form-group">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Username</mat-label>
              <input 
                matInput 
                name="username" 
                ngModel 
                required 
                minlength="3" 
                maxlength="20"
                #usernameInput="ngModel"
                autocomplete="username">
              <mat-icon matPrefix>account_circle</mat-icon>
              <mat-error *ngIf="usernameInput.touched && usernameInput.errors?.['required']">
                Username is required.
              </mat-error>
              <mat-error *ngIf="usernameInput.touched && usernameInput.errors?.['minlength']">
                Username must be at least 3 characters.
              </mat-error>
              <mat-error *ngIf="usernameInput.touched && usernameInput.errors?.['maxlength']">
                Username cannot exceed 20 characters.
              </mat-error>
            </mat-form-field>
          </div>

          <!-- Email Field -->
          <div class="form-group">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Email Address</mat-label>
              <input 
                matInput 
                type="email" 
                name="email" 
                ngModel 
                required 
                email
                #emailInput="ngModel"
                autocomplete="email">
              <mat-icon matPrefix>email</mat-icon>
              <mat-error *ngIf="emailInput.touched && emailInput.errors?.['required']">
                Email is required.
              </mat-error>
              <mat-error *ngIf="emailInput.touched && emailInput.errors?.['email']">
                Please enter a valid email.
              </mat-error>
            </mat-form-field>
          </div>

          <!-- Password Field -->
          <div class="form-group">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Password</mat-label>
              <input 
                matInput 
                [type]="showPassword ? 'text' : 'password'" 
                name="password" 
                ngModel 
                required 
                minlength="8"
                maxlength="50"
                #passwordInput="ngModel"
                autocomplete="new-password">
              <mat-icon matPrefix>lock</mat-icon>
              <button 
                mat-icon-button 
                matSuffix 
                (click)="togglePasswordVisibility()" 
                type="button"
                class="password-toggle">
                <mat-icon>{{ showPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
              </button>
              <mat-error *ngIf="passwordInput.touched && passwordInput.errors?.['required']">
                Password is required.
              </mat-error>
              <mat-error *ngIf="passwordInput.touched && passwordInput.errors?.['minlength']">
                Password must be at least 8 characters.
              </mat-error>
              <mat-error *ngIf="passwordInput.touched && passwordInput.errors?.['maxlength']">
                Password cannot exceed 50 characters.
              </mat-error>
            </mat-form-field>
          </div>

          <!-- Confirm Password Field -->
          <div class="form-group">
            <mat-form-field appearance="outline" class="form-field">
              <mat-label>Confirm Password</mat-label>
              <input 
                matInput 
                [type]="showPassword ? 'text' : 'password'" 
                name="confirmPassword" 
                ngModel 
                required
                #confirmPasswordInput="ngModel"
                autocomplete="new-password">
              <mat-icon matPrefix>lock_reset</mat-icon>
              <mat-error *ngIf="confirmPasswordInput.touched && confirmPasswordInput.errors?.['required']">
                Please confirm your password.
              </mat-error>
            </mat-form-field>
          </div>

          <!-- Password Mismatch Error -->
          <div *ngIf="passwordMismatch" class="error-box">
            <mat-icon>error_outline</mat-icon>
            <span>Passwords do not match.</span>
          </div>

          <!-- General Error Message -->
          <div *ngIf="errorMessage" class="error-box">
            <mat-icon>error_outline</mat-icon>
            <span>{{ errorMessage }}</span>
          </div>

  
          <!-- Submit Button -->
          <button 
            mat-raised-button 
            color="primary" 
            type="submit" 
            [disabled]="registerForm.invalid || isLoading || passwordMismatch"
            class="register-button">
            <mat-icon *ngIf="!isLoading">person_add</mat-icon>
            <span *ngIf="!isLoading">Create Account</span>
            <span *ngIf="isLoading" class="spinner">
              <mat-spinner diameter="20"></mat-spinner>
              Creating account...
            </span>
          </button>

        </form>
      </mat-card-content>

      <!-- Footer -->
      <div class="register-footer">
        <span>Already have an account?</span>
        <a mat-button color="primary" routerLink="/login" class="login-link">
          Log In
        </a>
      </div>
    </mat-card>
  </div>
</div>
